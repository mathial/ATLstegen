{% extends "common/layout.html.twig" %}


{% block body %}

  {% if arrRS|length > 0 %}
  <script type="text/javascript">

    $( document ).ready(function() {
      console.log("ready");
      $('#graph').highcharts({
        title: {
            text: 'Rankings evolution',
            x: -20 //center
        },
        xAxis: {
            categories: [
              {% for date, score in arrRS %}
                "{{ date }}",
              {% endfor %}
            ],
            labels: {
              rotation: -90,
              overflow: "false"
            }
        },
        yAxis: {
          reversed: false,
          min: 700, 
            title: {
                text: 'points'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        
        tooltip: {
        },
        series: [{ 
          name:"evol", 
          data: [
            {% for date, score in arrRS %}
              {{ score|number_format(1, '.', '') }},
            {% endfor %}
          ]
          }
        ]
      });
    });
    
  </script>
  {% endif %}

  <h3>View player {{ player.namelong }}</h3>

  <div>
  	<label>Name</label>
  	{{ player.namelong }}
  </div>

  <div>
    <label>Rankings</label>
    #{{ lastR.position }} - {{ lastR.score|number_format(0, ',', '') }}pts
  </div>

  <ul class="tab_menu">
    <li><a href="{{ path('player_view', {'id':player.id}) }}">Opponents</a></li>
    <li><a href="{{ path('player_view_matches', {'id':player.id}) }}">Matches</a></li>
    <li class="tab_selected"><a href="{{ path('player_view_evolution', {'id':player.id}) }}">Rankings Evolution</a></li>
  </ul>

  <div id="graph" style="min-width: 310px; height: 500px; margin: 0 auto"></div>
	
{% endblock %}

